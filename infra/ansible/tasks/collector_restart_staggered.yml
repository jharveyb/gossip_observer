# Staggered restart of collectors with health checks
# Any delay between restarts is due to delays in the single-restart tasks
#
# Requires: collectors_to_restart (list of collector dicts)

- name: Restart collectors with staggered timing
  ansible.builtin.include_tasks: collector_restart_single.yml
  loop: "{{ collectors_to_restart }}"
  loop_control:
    loop_var: collector
    label: "{{ collector.uuid }}"
